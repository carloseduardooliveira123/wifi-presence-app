<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi Presence - App Completo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .phone-container {
            max-width: 390px;
            margin: 20px auto;
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            min-height: 844px;
        }
        
        .screen { display: none; min-height: 844px; }
        .screen.active { display: block; }
        
        /* Login Screen */
        .login-screen {
            padding: 60px 30px;
            text-align: center;
        }
        
        .logo {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .app-title {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .tagline {
            color: #666;
            margin-bottom: 40px;
        }
        
        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        .input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn-primary {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
        }
        
        .demo-btn {
            margin-top: 20px;
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        /* Network Selection */
        .network-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .network-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        /* Home Screen */
        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 20px;
            color: white;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
        }
        
        .header-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .header-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .wifi-info {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .wifi-name {
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .users-count {
            color: rgba(255,255,255,0.9);
            margin-top: 5px;
        }
        
        .user-list {
            padding: 20px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }
        
        .user-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .user-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .user-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            margin-right: 15px;
            position: relative;
        }
        
        .status-dot {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 3px solid white;
        }
        
        .status-dot.available { background: #4CAF50; }
        .status-dot.busy { background: #FF9800; }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        
        .user-title {
            color: #666;
            font-size: 14px;
        }
        
        .user-bio {
            color: #555;
            line-height: 1.5;
            margin-bottom: 12px;
        }
        
        .interests {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .interest-tag {
            background: #f0f0f0;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            color: #555;
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }
        
        .social-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            background: #f0f0f0;
            transition: all 0.2s;
        }
        
        .social-btn:hover {
            transform: scale(1.1);
        }
        
        .connect-btn {
            margin-left: auto;
            padding: 8px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Payment Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }
        
        .modal-content {
            background: white;
            width: 100%;
            max-width: 390px;
            border-radius: 30px 30px 0 0;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .modal-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .payment-content {
            padding: 20px;
        }
        
        .establishment-info {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .establishment-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .table-info {
            color: #666;
        }
        
        .order-list {
            margin-bottom: 20px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .order-name {
            color: #333;
            font-size: 14px;
        }
        
        .order-price {
            font-weight: bold;
            color: #667eea;
        }
        
        .payment-summary {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .total-row {
            border-top: 2px solid #e0e0e0;
            padding-top: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .payment-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn-split {
            flex: 1;
            padding: 14px;
            background: #f0f0f0;
            color: #333;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-pay {
            flex: 1;
            padding: 14px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Split Payment Screen */
        .split-options {
            padding: 20px;
        }
        
        .split-card {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .split-card:hover {
            background: #667eea;
            color: white;
        }
        
        .split-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .split-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .split-desc {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .people-list {
            padding: 20px;
        }
        
        .person-card {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .person-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 15px;
            font-size: 14px;
        }
        
        .person-info {
            flex: 1;
        }
        
        .person-name {
            font-weight: 600;
            color: #333;
        }
        
        .person-status {
            font-size: 12px;
            color: #999;
        }
        
        .person-amount {
            font-size: 16px;
            font-weight: bold;
            color: #667eea;
        }
        
        /* Success Screen */
        .success-screen {
            padding: 40px;
            text-align: center;
        }
        
        .success-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 0.5s;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .success-title {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .success-message {
            color: #666;
            margin-bottom: 30px;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 390px;
            background: white;
            border-top: 1px solid #e0e0e0;
            padding: 10px 0;
            display: flex;
            justify-content: space-around;
        }
        
        .nav-btn {
            background: none;
            border: none;
            padding: 10px;
            cursor: pointer;
            color: #999;
            font-size: 24px;
            transition: all 0.2s;
        }
        
        .nav-btn.active {
            color: #667eea;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <!-- Login Screen -->
        <div id="loginScreen" class="screen active">
            <div class="login-screen">
                <div class="logo">📡</div>
                <h1 class="app-title">WiFi Presence</h1>
                <p class="tagline">Conecte-se com pessoas próximas</p>
                
                <div class="input-group">
                    <label class="input-label">Email</label>
                    <input type="email" class="input" placeholder="seu@email.com" id="emailInput">
                </div>
                
                <div class="input-group">
                    <label class="input-label">Senha</label>
                    <input type="password" class="input" placeholder="••••••" id="passwordInput">
                </div>
                
                <button class="btn-primary" onclick="login()">Entrar</button>
                <button class="btn-primary demo-btn" onclick="showNetworkSelection()">🚀 Entrar como Demo</button>
            </div>
        </div>
        
        <!-- Network Selection Screen -->
        <div id="networkScreen" class="screen">
            <div style="padding: 30px;">
                <h2 style="color: #667eea; margin-bottom: 10px;">📍 Onde você está?</h2>
                <p style="color: #666; margin-bottom: 30px;">Selecione a rede WiFi do local</p>
                
                <div id="networkList">
                    <div class="network-card" onclick="selectNetwork('Starbucks WiFi', 'cafe')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 18px; font-weight: bold; color: #333;">
                                    ☕ Starbucks Paulista
                                </div>
                                <div style="color: #666; margin-top: 5px;">
                                    42 pessoas conectadas
                                </div>
                            </div>
                            <div style="color: #667eea;">📶 Excelente</div>
                        </div>
                    </div>
                    
                    <div class="network-card" onclick="selectNetwork('Famiglia Guest', 'restaurant')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 18px; font-weight: bold; color: #333;">
                                    🍽️ Restaurante Famiglia
                                </div>
                                <div style="color: #666; margin-top: 5px;">
                                    28 pessoas conectadas
                                </div>
                            </div>
                            <div style="color: #667eea;">📶 Ótima</div>
                        </div>
                    </div>
                    
                    <div class="network-card" onclick="selectNetwork('WeWork Guest', 'coworking')">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 18px; font-weight: bold; color: #333;">
                                    🏢 WeWork Faria Lima
                                </div>
                                <div style="color: #666; margin-top: 5px;">
                                    128 pessoas conectadas
                                </div>
                            </div>
                            <div style="color: #667eea;">📶 Boa</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Home Screen -->
        <div id="homeScreen" class="screen">
            <div class="header">
                <div class="header-top">
                    <h2 style="font-size: 24px;">WiFi Presence</h2>
                    <div class="header-actions">
                        <button class="header-btn" onclick="openPayment()" style="position: relative;">
                            💳
                            <span class="notification-badge" id="paymentBadge" style="display: none;">!</span>
                        </button>
                        <button class="header-btn" onclick="alert('Configurações em desenvolvimento')">⚙️</button>
                    </div>
                </div>
                <div class="wifi-info">
                    <div class="wifi-name" id="currentNetwork">
                        📶 Conectando...
                    </div>
                    <div class="users-count" id="usersCount">Carregando...</div>
                </div>
            </div>
            
            <div class="user-list">
                <h3 class="section-title">Pessoas Próximas</h3>
                <div id="usersList"></div>
            </div>
            
            <div class="bottom-nav">
                <button class="nav-btn active">🏠</button>
                <button class="nav-btn" onclick="openPayment()" style="position: relative;">
                    💳
                    <span class="notification-badge" id="paymentBadgeNav" style="display: none;">!</span>
                </button>
                <button class="nav-btn">💬</button>
                <button class="nav-btn">👤</button>
            </div>
        </div>
    </div>
    
    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div id="paymentMainScreen">
                <div class="modal-header">
                    <span class="modal-title">💳 WiFi Pay</span>
                    <button class="close-modal" onclick="closePayment()">✕</button>
                </div>
                
                <div class="payment-content">
                    <div class="establishment-info">
                        <div class="establishment-name" id="establishmentName">Carregando...</div>
                        <div class="table-info">Mesa 12 detectada automaticamente</div>
                    </div>
                    
                    <div class="order-list" id="orderList">
                        <!-- Orders will be populated here -->
                    </div>
                    
                    <div class="payment-summary">
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="subtotal">R$ 0,00</span>
                        </div>
                        <div class="summary-row">
                            <span>Taxa de serviço (10%)</span>
                            <span id="serviceFee">R$ 0,00</span>
                        </div>
                        <div class="summary-row total-row">
                            <span>Total</span>
                            <span id="total">R$ 0,00</span>
                        </div>
                    </div>
                    
                    <div class="payment-actions">
                        <button class="btn-split" onclick="showSplitOptions()">Dividir Conta</button>
                        <button class="btn-pay" onclick="payFull()">Pagar Total</button>
                    </div>
                </div>
            </div>
            
            <div id="splitScreen" style="display: none;">
                <div class="modal-header">
                    <span class="modal-title">👥 Dividir Conta</span>
                    <button class="close-modal" onclick="showPaymentMain()">←</button>
                </div>
                
                <div class="split-options">
                    <div class="split-card" onclick="splitEqually()">
                        <div class="split-icon">🟰</div>
                        <div class="split-title">Dividir Igualmente</div>
                        <div class="split-desc">R$ <span id="equalAmount">0,00</span> para cada</div>
                    </div>
                    
                    <div class="split-card" onclick="alert('Em desenvolvimento')">
                        <div class="split-icon">📝</div>
                        <div class="split-title">Por Item Consumido</div>
                        <div class="split-desc">Cada um paga o que pediu</div>
                    </div>
                    
                    <div class="split-card" onclick="alert('Em desenvolvimento')">
                        <div class="split-icon">⚙️</div>
                        <div class="split-title">Personalizado</div>
                        <div class="split-desc">Definir valores manualmente</div>
                    </div>
                </div>
            </div>
            
            <div id="splitConfirmScreen" style="display: none;">
                <div class="modal-header">
                    <span class="modal-title">✅ Confirmação</span>
                    <button class="close-modal" onclick="showSplitOptions()">←</button>
                </div>
                
                <div class="people-list" id="peopleList">
                    <!-- People will be populated here -->
                </div>
                
                <div class="payment-actions" style="padding: 20px;">
                    <button class="btn-pay" onclick="confirmPayment()">Confirmar Minha Parte</button>
                </div>
            </div>
            
            <div id="successScreen" style="display: none;">
                <div class="success-screen">
                    <div class="success-icon">✅</div>
                    <div class="success-title">Pagamento Confirmado!</div>
                    <div class="success-message">
                        <p id="successMessage">Sua parte foi paga com sucesso</p>
                        <p style="margin-top: 10px; font-size: 14px;">📧 Comprovante enviado por email</p>
                        <p style="font-size: 14px;">🎁 Você ganhou pontos de fidelidade!</p>
                    </div>
                    <button class="btn-primary" onclick="closePayment()">Fechar</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentNetwork = '';
        let currentType = '';
        let currentBill = 0;
        
        const mockUsers = {
            cafe: [
                {
                    name: 'Ana Silva',
                    title: 'Product Designer',
                    bio: 'Criando experiências digitais incríveis',
                    interests: ['Design', 'UX/UI', 'Startup'],
                    status: 'available'
                },
                {
                    name: 'Carlos Mendes',
                    title: 'Developer',
                    bio: 'Full Stack | React | Node.js',
                    interests: ['Tech', 'AI', 'Web3'],
                    status: 'busy'
                }
            ],
            restaurant: [
                {
                    name: 'Maria Costa',
                    title: 'Marketing Manager',
                    bio: 'Growth hacking e estratégias digitais',
                    interests: ['Marketing', 'Growth'],
                    status: 'available'
                },
                {
                    name: 'Pedro Santos',
                    title: 'Entrepreneur',
                    bio: 'Fundador @ StartupXYZ',
                    interests: ['Business', 'Networking'],
                    status: 'available'
                },
                {
                    name: 'Ana Oliveira',
                    title: 'Designer',
                    bio: 'UI/UX | Branding',
                    interests: ['Design', 'Arte'],
                    status: 'available'
                }
            ],
            coworking: [
                {
                    name: 'Roberto Lima',
                    title: 'CEO @ InnovateCo',
                    bio: 'Transformando ideias em negócios',
                    interests: ['Startups', 'Investimento'],
                    status: 'available'
                },
                {
                    name: 'Julia Ferreira',
                    title: 'Data Scientist',
                    bio: 'Machine Learning | Analytics',
                    interests: ['AI', 'Data', 'Python'],
                    status: 'available'
                }
            ]
        };
        
        const restaurantOrders = [
            { name: 'Pizza Margherita', price: 65 },
            { name: 'Lasanha Bolonhesa', price: 48 },
            { name: 'Refrigerantes (4x)', price: 32 },
            { name: 'Sobremesas (2x)', price: 36 }
        ];
        
        function login() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            
            if (!email || !password) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            showNetworkSelection();
        }
        
        function showNetworkSelection() {
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('networkScreen').classList.add('active');
        }
        
        function selectNetwork(network, type) {
            currentNetwork = network;
            currentType = type;
            
            // Update home screen
            document.getElementById('currentNetwork').innerHTML = `📶 ${network}`;
            const users = mockUsers[type] || [];
            document.getElementById('usersCount').textContent = `${users.length} pessoas conectadas`;
            
            // Show payment badge for restaurant
            if (type === 'restaurant') {
                document.getElementById('paymentBadge').style.display = 'flex';
                document.getElementById('paymentBadgeNav').style.display = 'flex';
                currentBill = 181; // Restaurant bill
            }
            
            // Load users
            loadUsers(type);
            
            // Show home screen
            document.getElementById('networkScreen').classList.remove('active');
            document.getElementById('homeScreen').classList.add('active');
        }
        
        function loadUsers(type) {
            const users = mockUsers[type] || [];
            const usersList = document.getElementById('usersList');
            usersList.innerHTML = '';
            
            users.forEach(user => {
                const initials = user.name.split(' ').map(n => n[0]).join('');
                const userCard = `
                    <div class="user-card">
                        <div class="user-header">
                            <div class="user-avatar">
                                ${initials}
                                <div class="status-dot ${user.status}"></div>
                            </div>
                            <div class="user-info">
                                <div class="user-name">${user.name}</div>
                                <div class="user-title">${user.title}</div>
                            </div>
                        </div>
                        <p class="user-bio">${user.bio}</p>
                        <div class="interests">
                            ${user.interests.map(i => `<span class="interest-tag">${i}</span>`).join('')}
                        </div>
                        <div class="user-actions">
                            <button class="social-btn">💚</button>
                            <button class="social-btn">📷</button>
                            <button class="connect-btn">Conectar</button>
                        </div>
                    </div>
                `;
                usersList.innerHTML += userCard;
            });
        }
        
        function openPayment() {
            const modal = document.getElementById('paymentModal');
            modal.classList.add('active');
            
            if (currentType === 'restaurant') {
                document.getElementById('establishmentName').textContent = 'Restaurante Famiglia';
                loadOrders();
            } else if (currentType === 'cafe') {
                document.getElementById('establishmentName').textContent = 'Starbucks Paulista';
                loadCafeOrders();
            } else {
                document.getElementById('establishmentName').textContent = 'WeWork Faria Lima';
                document.querySelector('.establishment-info').innerHTML = `
                    <div class="establishment-name">WeWork Faria Lima</div>
                    <div class="table-info">Sem consumo pendente</div>
                `;
            }
        }
        
        function loadOrders() {
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = '<h4 style="margin-bottom: 10px;">Seus pedidos:</h4>';
            
            let subtotal = 0;
            restaurantOrders.forEach(order => {
                orderList.innerHTML += `
                    <div class="order-item">
                        <span class="order-name">${order.name}</span>
                        <span class="order-price">R$ ${order.price},00</span>
                    </div>
                `;
                subtotal += order.price;
            });
            
            const serviceFee = subtotal * 0.1;
            const total = subtotal + serviceFee;
            currentBill = total;
            
            document.getElementById('subtotal').textContent = `R$ ${subtotal},00`;
            document.getElementById('serviceFee').textContent = `R$ ${serviceFee.toFixed(2).replace('.', ',')}`;
            document.getElementById('total').textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
            document.getElementById('equalAmount').textContent = (total / 4).toFixed(2).replace('.', ',');
        }
        
        function loadCafeOrders() {
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = '<h4 style="margin-bottom: 10px;">Consumo de hoje:</h4>';
            
            const cafeOrders = [
                { name: 'Cappuccino Grande', price: 18 },
                { name: 'Sandwich Club', price: 35 },
                { name: 'Flat White', price: 16 }
            ];
            
            let subtotal = 0;
            cafeOrders.forEach(order => {
                orderList.innerHTML += `
                    <div class="order-item">
                        <span class="order-name">${order.name}</span>
                        <span class="order-price">R$ ${order.price},00</span>
                    </div>
                `;
                subtotal += order.price;
            });
            
            currentBill = subtotal;
            document.getElementById('subtotal').textContent = `R$ ${subtotal},00`;
            document.getElementById('serviceFee').textContent = `R$ 0,00`;
            document.getElementById('total').textContent = `R$ ${subtotal},00`;
        }
        
        function closePayment() {
            document.getElementById('paymentModal').classList.remove('active');
            showPaymentMain();
            // Remove badges
            document.getElementById('paymentBadge').style.display = 'none';
            document.getElementById('paymentBadgeNav').style.display = 'none';
        }
        
        function showPaymentMain() {
            document.getElementById('paymentMainScreen').style.display = 'block';
            document.getElementById('splitScreen').style.display = 'none';
            document.getElementById('splitConfirmScreen').style.display = 'none';
            document.getElementById('successScreen').style.display = 'none';
        }
        
        function showSplitOptions() {
            document.getElementById('paymentMainScreen').style.display = 'none';
            document.getElementById('splitScreen').style.display = 'block';
        }
        
        function splitEqually() {
            document.getElementById('splitScreen').style.display = 'none';
            document.getElementById('splitConfirmScreen').style.display = 'block';
            
            const peopleList = document.getElementById('peopleList');
            const equalAmount = (currentBill / 4).toFixed(2).replace('.', ',');
            
            peopleList.innerHTML = `
                <div class="person-card">
                    <div class="person-avatar">EU</div>
                    <div class="person-info">
                        <div class="person-name">Você</div>
                        <div class="person-status">✅ Pronto para pagar</div>
                    </div>
                    <div class="person-amount">R$ ${equalAmount}</div>
                </div>
                <div class="person-card">
                    <div class="person-avatar">MS</div>
                    <div class="person-info">
                        <div class="person-name">Maria Silva</div>
                        <div class="person-status">⏳ Aguardando</div>
                    </div>
                    <div class="person-amount">R$ ${equalAmount}</div>
                </div>
                <div class="person-card">
                    <div class="person-avatar">PS</div>
                    <div class="person-info">
                        <div class="person-name">Pedro Santos</div>
                        <div class="person-status">⏳ Aguardando</div>
                    </div>
                    <div class="person-amount">R$ ${equalAmount}</div>
                </div>
                <div class="person-card">
                    <div class="person-avatar">AO</div>
                    <div class="person-info">
                        <div class="person-name">Ana Oliveira</div>
                        <div class="person-status">⏳ Aguardando</div>
                    </div>
                    <div class="person-amount">R$ ${equalAmount}</div>
                </div>
            `;
        }
        
        function payFull() {
            if (confirm(`Confirmar pagamento total de R$ ${currentBill.toFixed(2).replace('.', ',')}?`)) {
                showSuccess('Pagamento total realizado com sucesso!');
            }
        }
        
        function confirmPayment() {
            showSuccess('Sua parte foi paga com sucesso!');
            
            // Simulate others confirming
            setTimeout(() => {
                const cards = document.querySelectorAll('.person-card');
                if (cards[1]) {
                    cards[1].querySelector('.person-status').textContent = '✅ Pago';
                }
            }, 3000);
        }
        
        function showSuccess(message) {
            document.getElementById('paymentMainScreen').style.display = 'none';
            document.getElementById('splitScreen').style.display = 'none';
            document.getElementById('splitConfirmScreen').style.display = 'none';
            document.getElementById('successScreen').style.display = 'block';
            document.getElementById('successMessage').textContent = message;
        }
        
        // Auto-detect restaurant bill after 3 seconds
        setTimeout(() => {
            if (currentType === 'restaurant') {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 80px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: white;
                    padding: 15px 20px;
                    border-radius: 12px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                    z-index: 2000;
                    max-width: 350px;
                    animation: slideDown 0.5s ease;
                `;
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 24px;">💳</span>
                        <div>
                            <div style="font-weight: bold; color: #333;">Conta disponível</div>
                            <div style="font-size: 14px; color: #666;">Mesa 12 - R$ 199,10</div>
                        </div>
                    </div>
                `;
                document.body.appendChild(notification);
                
                setTimeout(() => notification.remove(), 4000);
            }
        }, 3000);
        
        // Add animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from { transform: translate(-50%, -100%); opacity: 0; }
                to { transform: translate(-50%, 0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
